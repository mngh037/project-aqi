# Project AQI: How's the air in the US doing?
Until recently, income had been the primary criterion by which social program benefits and public funding were allocated in the United States. This approach presumed that financial disadvantage was the dominant indicator of inequality. However, policymakers are now recognizing that material inequality is also deeply shaped by environmental injustice: some communities bear a disproportionate share of environmental burdens borne little by them. In response, many states are transitioning to a new framework for welfare and policy benchmarking namely Disadvantaged Community (DAC) criteria. This framework takes into account the cumulative environmental burdens and negative externalities experienced by communities, alongside traditional socioeconomic indicators.

At the core, this shift implies an acknowledgment that climate change and environmental hazards do not impact all communities equally. Factors such as race, geography, and historic patterns of underinvestment contribute to certain populations being systematically more vulnerable to environmental harms. This encompasses air pollution, which remains one of the most pervasive and insidious risks to public health. This mini-project explores the relationship between air pollution and community disparities in the U.S., focusing specifically on two globally recognized indicators of air quality: Air Quality Index (AQI) and Particulate Matter 2.5 micrometers or smaller (PM2.5).

These two indicators—AQI and PM2.5—are monitored by a vast network of weather stations and air quality sensors throughout the U.S., which collect data at varying intervals, often reporting several measurements per day for multiple pollutants. Thousands of these stations report hourly readings, resulting in an enormous volume of data that demands robust computational and memory resources for processing. While building real-time forecasting systems is beyond the scope of this project, such data infrastructure could theoretically support live public health alerts and predictive modeling of air quality for the days ahead—tasks that require large-scale computing with high-volume, high-velocity data pipelines.

Even within this more limited project scope, large-scale computing methods were necessary not just due to the size of the air quality dataset, but also due to the need for complex record-matching between air quality data and detailed demographic data from the U.S. Census. For example, understanding the intersection of air pollution exposure with variables like income, race, or population density requires aligning air quality records (typically aggregated at county or regional levels) with fine-grained census data (often available at the tract level).

The project was ultimately downscaled from its original ambition for two key reasons. First, while OpenAQ hosts an extensive public repository of air quality data, its API documentation is outdated, making it difficult to reliably obtain all the pollutant measurements needed to compute AQI independently for every location. Second, the EPA’s aggregated datasets often report air quality at the county or Core-Based Statistical Area (CBSA) level, meaning they are already spatially smoothed to administrative centroids. As a result, attempting to calculate distances from monitoring sites to census tracts where the most precise demographic variables (such as race and income) are available would introduce spatial noise and bias, especially in regions where monitoring stations are sparse.

This issue highlights a broader challenge: even in the U.S., air quality monitoring networks are unevenly distributed, with far denser coverage in urban centers than in rural or low-income areas. Thus, locational AQI estimates remain fuzzy, and spatial modeling or interpolation is often required for meaningful analysis. In this project, I chose to proceed with aggregated county-level data, while recognizing the limitations this introduces for precision.

To process this large and complex dataset, I used distributed computing with a Dask cluster. The cluster architecture included 1 scheduler running in the background and 5 workers, each tasked with handling a partitioned chunk of the dataset in parallel. This distributed approach significantly reduces memory and processing bottlenecks compared to single-core or single-machine processing. Given Dask’s high memory requirements, I provisioned 80GB of memory, distributed equally across the workers to ensure sufficient RAM for each. I also employed Dask’s lazy evaluation mechanism, only calling .compute() at the end of the workflow to trigger optimized graph execution, thus improving caching and storage efficiency.

The project workflow consisted of three stages:
1. Data Collection: Retrieving air quality data from the EPA and relevant demographic data from Census sources.
2. Data Exploration and Analysis: Conducted in a Jupyter Notebook to ensure reproducibility and transparency of the analysis pipeline.
3. Data Visualization: Outputs presented as a HTML webpage, though the project fell short of the goal of operationalizing the process into a fully deployable command-line app, due to time constraints.

Despite these limitations, the project had some findings of its own:
- Overall national air quality has improved since 1980. The average AQI decreased steadily from 53 to 42 over this period.

![US air quality 1980-2024](./visualizations/yearly_aqi.png)
- However, this national average conceals significant local variation. 58.44% of U.S. counties recorded in the dataset experienced an overall worsening trend in AQI during certain years. Moreover, while average AQI has improved, peak daily AQI levels remain volatile, with some regions continuing to exceed healthy thresholds.
- Unhealthy air quality days (defined as AQI ≥ 101) have declined notably from an average of 34 days in 1980 to just 3 days in 2024. This reflects two structural trends: the U.S. has moved beyond its peak industrialization phase, and cleaner technologies and regulations have likely improved air quality in major cities.
- In terms of income, no strong patterns emerged. However, racial disparities in air quality exposure appeared suggestive: while White-majority counties exhibited wide variability (both high and low AQI outliers), Black- and Asian-majority counties showed an overall higher AQI range, albeit still below officially unhealthy thresholds.

![AQI by race](./visualizations/aqi_by_race.png)
- Among the criteria pollutants, PM2.5 demonstrated the most dramatic changes. Virtually absent in monitoring data from the 1990s (likely due to lack of measurement infrastructure), PM2.5 is now a dominant contributor to AQI levels. A concerning upward trend in its yearly average since 2019 suggests that wildfires, transportation, and secondary aerosols remain persistent sources of fine particulate pollution.

There is much room for further exploration in this area. While this project offers hints at potential disparities in air pollution exposure, more granular data and refined modeling techniques are needed to make robust causal inferences about race, income, and pollution burdens. Moreover, future work should extend into more computationally intensive domains, such as health outcome modeling: can we predict and quantify morbidity and mortality risks based on pollution levels? How do demographic characteristics modulate the health impacts of exposure?

## Replicating the code
Open `index.html` with the browser to view the summary of findings.
To replicate the process to build the visualization:
- First, run `python get_data.py` from the terminal to download all the data.
- Run `analysis.ipynb`